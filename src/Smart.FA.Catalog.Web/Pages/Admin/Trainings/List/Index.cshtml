@page
@using Smart.Design.Razor.TagHelpers.Pill
@using Core.SeedWork
@using Core.Domain.Enumerations
@model Api.Pages.Admin.Trainings.List.ListModel
@{
    Layout = "_AdminLayout";
    ViewData["ToolBarTitle"] = "My Trainings";
    ViewData["Title"] = "My Trainings";
}

@section HeaderToolbar {
    <div class="c-navbar c-navbar--bordered-bottom">
        <div class="c-toolbar">
            <div class="c-toolbar__left">
                <div class="c-toolbar__item">
                    <h2 class="c-toolbar__title">@ViewData["ToolBarTitle"]</h2>
                </div>
            </div>

            <smart-button-toolbar>
                <div class="c-toolbar__right">
                    <a href="/admin/trainings/create?fromlist=">
                        <smart-button label="Add new training" leading-icon="Add"></smart-button>
                    </a>
                </div>
            </smart-button-toolbar>
        </div>
    </div>
}

<div class="o-card-grid small-up-1">
    @foreach (var training in Model.Trainings)
    {
        <smart-card>
            <smart-card-body contains-actions="true">
                <smart-card-actions>
                    <div class="c-toolbar">
                        <div class="c-toolbar__right">
                            <div class="c-toolbar__item">
                                <a href="/admin/trainings/edit/@training.TrainingId">
                                    <smart-button leading-icon="EditAlt" button-style="Borderless"></smart-button>
                                </a>
                            </div>
                            <form method="post" asp-page-handler="Delete" asp-route-id="@training.TrainingId">
                                <button class="c-button c-button--borderless">
                                    <smart-icon icon="Delete"/>
                                </button>
                            </form>
                        </div>
                    </div>
                </smart-card-actions>
                <smart-card-content>
                    <smart-grid>
                        <smart-grid-column width="8">
                            <smart-card-title text="@training.Title"></smart-card-title>
                        </smart-grid-column>
                        <smart-grid-column width="4">
                            <smart-pill status="@PillStatus.Default" label="@(Enumeration.FromValue<TrainingStatus>(training.StatusId).DisplayStatus())"></smart-pill>
                        </smart-grid-column>
                    </smart-grid>
                    <span>Marketing, communication et canaux numériques</span>
                </smart-card-content>
            </smart-card-body>
        </smart-card>
    }
</div>

<div class="c-toolbar">
    <div class="c-toolbar__left">
        @if (Model.Trainings.HasPreviousPage)
        {
            <a asp-page="/admin/trainings/list/index" asp-route-CurrentPage="@(Model.CurrentPage - 1)">Previous</a>
        }
    </div>

    <div> @Model.Trainings.Count/@Model.Trainings.TotalCount Trainings - Page @Model.CurrentPage/@Model.Trainings.TotalPages</div>
    <div class="c-toolbar__right">
        @if (Model.Trainings.HasNextPage)
        {
            <a asp-page="/admin/trainings/list/index" asp-route-CurrentPage="@(Model.CurrentPage + 1)">Next</a>
        }
    </div>
</div>

